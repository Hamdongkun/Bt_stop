<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8" />
    <title th:text="${product.productName} + ' - 상세 정보'">상품 상세</title>
    <link rel="stylesheet" href="/css/detail_page.css" />
</head>
<body>
<div class="container">
    <div class="product-detail">
        <img th:src="@{${product.imageUrl}}" alt="상품 이미지" class="product-image"/>
        <div class="info">
            <h2 th:text="${product.productName}">상품명</h2>
            <p class="price" th:text="${product.price} + '원'">가격</p>
            <p class="desc" th:text="${product.description}">상품설명</p>
            <p class="stock" th:text="'재고: ' + ${product.stock}">재고</p>
            <p class="rating" th:text="'⭐ 평균 평점: ' + ${avgRating} + '점'">평점</p>
        </div>
    </div>

    <hr/>

    <div class="review-section">
        <h3>구매자 리뷰</h3>

        <!-- 리뷰 폼 -->
        <form th:action="@{/product/{id}/review(id=${product.productId})}" method="post" class="review-form">
            <label>별점:
                <select name="rating" required>
                    <option value="5">⭐ 5점</option>
                    <option value="4">⭐ 4점</option>
                    <option value="3">⭐ 3점</option>
                    <option value="2">⭐ 2점</option>
                    <option value="1">⭐ 1점</option>
                </select>
            </label>
            <br/>
            <label>리뷰 내용:
                <textarea name="comment" rows="3" required></textarea>
            </label>
            <br/>
            <button type="submit">리뷰 등록</button>
        </form>

        <hr/>

        <div th:if="${#lists.isEmpty(reviews)}">리뷰가 없습니다.</div>
        <div th:each="review : ${reviews}" class="review-card">
            <p><strong th:text="'⭐ ' + ${review.rating} + '점'"></strong></p>
            <p th:text="${review.comment}">리뷰 내용</p>
            <p class="date" th:text="${#temporals.format(review.createAt, 'yyyy-MM-dd')}">작성일</p>
        </div>
    </div>
</div>
</body>
</html>
