<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8" />
  <title>Buttle - λ©”μΈνμ΄μ§€</title>
  <link rel="stylesheet" href="/css/cart.css" />
</head>
<body>

<!-- μƒλ‹¨ navbar -->
<div class="navbar">
  <a href="/" class="logo-text">Buttle</a>
  <a href="/search" class="search-button">π” κ²€μƒ‰ νμ΄μ§€λ΅ κ°€κΈ°</a>
</div>

<!-- μ¥λ°”κµ¬λ‹ λ°•μ¤ -->
<div class="box">
  <h2 class="title-text">μ¥λ°”κµ¬λ‹</h2>

  <!-- μ¥λ°”κµ¬λ‹ λΉ„μ–΄μμ„ λ• -->
  <div th:if="${#lists.isEmpty(cartItems)}">
    <p>μ¥λ°”κµ¬λ‹κ°€ λΉ„μ–΄μμµλ‹λ‹¤.</p>
  </div>

  <!-- μ¥λ°”κµ¬λ‹ μ•„μ΄ν… ν…μ΄λΈ” -->
  <div th:unless="${#lists.isEmpty(cartItems)}">
    <!-- μ „μ²΄ μ‚­μ  λ²„νΌ -->
    <form action="/cart/clear" method="post">
      <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}" />
      <button type="submit" class="all-delete">μ¥λ°”κµ¬λ‹ λΉ„μ°κΈ°</button>
    </form>

    <table class="cart-items-table">
      <thead>
      <tr>
        <th>μƒν’λ…</th>
        <th>λ‹¨κ°€</th>
        <th>μλ‰</th>
        <th>ν•©κ³„</th>
        <th>μμ •</th>
        <th>μ‚­μ </th>
      </tr>
      </thead>
      <tbody>
      <tr th:each="item : ${cartItems}">
        <td th:text="${item.productName}">μƒν’λ…</td>
        <td th:text="${item.unitPrice} + 'μ›'">λ‹¨κ°€</td>
        <td th:text="${item.quantity}">μλ‰</td>
        <td th:text="${item.linePrice} + 'μ›'">ν•©κ³„</td>
        <td>
          <!-- μλ‰ μ¦κ°€ λ²„νΌ -->
          <form action="/cart/increase" method="post" style="display:inline;">
            <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}" />
            <input type="hidden" name="productId" th:value="${item.productId}" />
            <button type="submit">β•</button>
          </form>

          <!-- μλ‰ κ°μ† λ²„νΌ -->
          <form action="/cart/decrease" method="post" style="display:inline;">
            <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}" />
            <input type="hidden" name="productId" th:value="${item.productId}" />
            <button type="submit">β–</button>
          </form>
        </td>
        <td>
          <!-- μ‚­μ  λ²„νΌ -->
          <form action="/cart/delete" method="post">
            <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}" />
            <input type="hidden" name="productId" th:value="${item.productId}" />
            <button type="submit">π—‘οΈ μ‚­μ </button>
          </form>
        </td>
      </tr>
      </tbody>
    </table>

    <!-- μ΄ν•© -->
    <hr class="line2"/>
    <h3 class="price-text-title">μ΄ κ²°μ  κΈμ•΅</h3>
    <div class="price-text" th:text="${totalPrice} + 'μ›'">0μ›</div>

    <!-- μ£Όλ¬Έν•κΈ° λ²„νΌ -->
    <a href="/payment" class="payment-rectangle" style="display: block; text-align: center; text-decoration: none;">
      μ£Όλ¬Έν•κΈ°
    </a>

  </div>
</div>

</body>
</html>
